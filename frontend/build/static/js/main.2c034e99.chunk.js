(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{161:function(e,t,c){"use strict";c.r(t);var i=c(1),n=c(23),s=c.n(n),a=(c(66),c(67),c(68),c(69),c(70),c(71),c(72),c(73),c(45),c(74),c(75),c(76),c(77),c(78),c(79),c(80),c(81),c(82),c(83),c(84),c(85),c(86),c(87),c(88),c(89),c(5)),r=c(27),l=c(7),o=c(10),d=c.n(o),j=c(17),u=c(28),b=c(4),h=c(9),m=c(0),p=function(e){var t=e.items,c=e.mcTable,n=e.addMC,s=e.currentSU,r=e.currentMF,l=e.editMode,o=e.setDisplayAlert,d=e.ship,j=e.setShip,u=e.poList,p=e.totalShip,O=e.totalInspect,f=e.totalSample,_=e.reset,x=e.handleDeletePO,v=e.setPOList,g=e.aqlTable,y=e.handleHighlight,S=e.checkedState,N=e.setCheckedState,C=e.deleteShipMulti,k=Object(i.useState)(""),w=Object(a.a)(k,2),M=w[0],P=w[1],I=Object(i.useState)(!0),T=Object(a.a)(I,2),D=T[0],F=T[1],q=Object(i.useState)([]),R=Object(a.a)(q,2),A=R[0],E=R[1];Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("itemTable_MCBtn").click())};return document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").addEventListener("keydown",e),function(){document.getElementById("itemTable_MC")&&document.getElementById("itemTable_MC").removeEventListener("keydown",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(e.preventDefault(),document.getElementById("highLightItemBtn").click())},t=document.getElementById("itemTotal_searchString");if(t)return t.addEventListener("keydown",e),function(){t.removeEventListener("keydown",e)}}),[]);var L=function(e,t){y("");var c=Object(h.a)(d);0===e&&"asc"===t?c.sort((function(e,t){return e.po_no>t.po_no?1:-1})):0===e&&"desc"===t?c.sort((function(e,t){return e.po_no<t.po_no?1:-1})):1===e&&"asc"===t?c.sort((function(e,t){return e.item_no>t.item_no?1:-1})):1===e&&"desc"===t&&c.sort((function(e,t){return e.item_no<t.item_no?1:-1})),j(c)},U=function(e,t){y("");var c=Object(h.a)(A);0===e&&"asc"===t?c.sort((function(e,t){return e.item_no>t.item_no?1:-1})):0===e&&"desc"===t&&c.sort((function(e,t){return e.item_no<t.item_no?1:-1})),E(c)},B=function(e){var t=e.target.value;P(t)},H=function(e){o({message:e,position:1,timeout:1500,color:"alert__red"})},Q=function(e,t){return function(c){var i=c.target.value,n=Object(h.a)(d),s=n.findIndex((function(c){return c.po_no===e&&c.item_no===t})),a=n.find((function(c){return c.po_no===e&&c.item_no===t}));n[s]=Object(b.a)(Object(b.a)({},a),{},{inspect_qty:parseInt(i)}),j(n)}},z=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!0,S[t]=!0;N(S)},K=function(){for(var e=document.getElementsByName("selectRow"),t=0;t<e.length;t++)e[t].checked=!1,S[t]=!1;N(S)};return Object(m.jsxs)("div",{className:"itemTable_2col",children:[Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"itemTable_Section",children:[Object(m.jsx)("div",{children:"Add MC:"}),"\xa0",Object(m.jsx)("div",{children:l?Object(m.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Additional MC here",onChange:B}):Object(m.jsx)("input",{type:"text",id:"itemTable_MC",name:"itemTable_MC",justify:"left",placeholder:"Include additional MC here",readOnly:!0,onChange:B})}),"\xa0\xa0",Object(m.jsx)("div",{children:l?Object(m.jsx)("i",{id:"itemTable_MCBtn",className:"fa fa-plus clickable",onClick:function(){!function(){var e=c.find((function(e){return e.mc_no===M})),i=t.find((function(e){return e.mc_no===M})),a=d.find((function(e){return e.mc_no===M})),l=c.find((function(e){return e.mc_no===M&&e.su_no===s&&e.mf_no===r}));e?l?a?H("MC was already entered in the ship item list, please check ! "):!e&&i||n(M):H("This MC seems not for this manufacturer!"):o({message:"This MC is not found in forthcoming or may not belong to this manufacturer!",position:1,timeout:4e3,color:"alert__red"})}()}}):null})]}),Object(m.jsxs)("div",{className:"itemTable_Header",children:[Object(m.jsx)("div",{children:"PO"}),Object(m.jsx)("div",{children:"DIV"}),Object(m.jsx)("div",{children:"Order Qty"}),Object(m.jsx)("div",{children:"Ship Qty"}),Object(m.jsx)("div",{children:"%Ship"}),Object(m.jsx)("div",{children:"Delete"}),Object(m.jsx)("div",{})]}),Object(m.jsx)("div",{id:"itemTableScroller",className:"itemTable_GridContainer",children:u?u.map((function(e,t){return Object(m.jsxs)("div",{className:"itemTable_Detail",children:[Object(m.jsx)("div",{children:e.po_no}),Object(m.jsx)("div",{children:e.customer}),Object(m.jsx)("div",{children:e.order_qty}),Object(m.jsx)("div",{children:e.ship_qty}),Object(m.jsxs)("div",{children:[Math.round(e.ship_qty/e.order_qty*100),"%"]}),Object(m.jsx)("div",{children:l?Object(m.jsx)("i",{className:"fa fa-times clickable",onClick:function(){x(e.mc_no,e.po_no)}}):null})]},t)})):null})]}),Object(m.jsx)("div",{}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"itemTotal_Section",children:[l?Object(m.jsxs)("div",{children:[D?"Summary":"Edit",l?Object(m.jsx)("i",{className:"fa fa-refresh itemTotal_undo_color clickable ",onClick:function(){!function(){var e=[],t=Object(h.a)(d);t.map((function(e){return e.item_no})).filter((function(e,t,c){return c.indexOf(e)===t})).forEach((function(c){var i=t.filter((function(e){return e.item_no===c})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),n=t.filter((function(e){return e.item_no===c})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=t.filter((function(e){return e.item_no===c})).reduce((function(e,t){return e+parseInt(t.sample_qty)}),0),a=t.filter((function(e){return e.item_no===c})).reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);e.push({item_no:c,order_qty:i,ship_qty:n,sample_qty:s,inspect_qty:a})})),E(e),F((function(e){return!e}))}(),y("")}}):null]}):Object(m.jsx)("div",{}),l?Object(m.jsxs)("div",{children:["Multi Del\xa0",Object(m.jsx)("i",{className:"fa fa-times itemTotal_refresh_color clickable",onClick:function(){!function(){for(var e=Object(h.a)(d),t=document.getElementsByClassName("clickrow"),c=0;c<t.length;c++)if(S[c]){var i=e[c];i=Object(b.a)(Object(b.a)({},i),{},{del:!0}),e[c]=i}e=e.filter((function(e){return!e.del})),C(e),K()}()}})]}):Object(m.jsx)("div",{}),l?Object(m.jsxs)("div",{children:["Reset Inspect \xa0",Object(m.jsx)("i",{className:"fa fa-refresh itemTotal_refresh_color clickable",onClick:function(){_()}})]}):Object(m.jsx)("div",{}),Object(m.jsxs)("div",{children:["Highlight \xa0",Object(m.jsx)("input",{type:"text",name:"itemTotal_searchString",id:"itemTotal_searchString",justify:"left",onInput:function(e){return e.target.value=(""+e.target.value).toUpperCase()},placeholder:"Enter item#"}),"\xa0",Object(m.jsx)("i",{className:"fa fa-search clickable",id:"highLightItemBtn",onClick:function(){y(document.getElementById("itemTotal_searchString").value)}})]})]}),D?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"itemTotal_Header",children:[Object(m.jsx)("div",{children:l?Object(m.jsx)("input",{type:"checkbox",name:"selectToggle",onChange:function(){document.getElementsByName("selectToggle")[0].checked?z():K()}}):null}),Object(m.jsxs)("div",{children:["PO",Object(m.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){L(0,"asc")}}),"\xa0",Object(m.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){L(0,"desc")}})]}),Object(m.jsxs)("div",{children:["By Item",Object(m.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){L(1,"asc")}}),"\xa0",Object(m.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){L(1,"desc")}})]}),Object(m.jsx)("div",{children:"Ship"}),Object(m.jsx)("div",{children:"Sample"}),Object(m.jsx)("div",{children:"Inspect"}),Object(m.jsx)("div",{children:"Delete"})]}),Object(m.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:d?d.map((function(e,t){return Object(m.jsxs)("div",{className:"itemTotal_Detail",children:[Object(m.jsx)("div",{children:l?Object(m.jsx)("input",{type:"checkbox",name:"selectRow",onChange:function(){return function(e){var t=S.map((function(t,c){return c===e?!t:t}));N(t)}(t)}}):null}),Object(m.jsx)("div",{children:e.po_no}),Object(m.jsx)("div",{children:e.item_no}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"number",id:"itemTotal_shipQty",name:"itemTotal_shipQty",value:e.ship_qty||1,min:"1",max:"30000",onChange:(c=e.po_no,i=e.item_no,function(e){var t=e.target.value;if(""!==t){parseInt(t)>3e4&&(t=3e4,o({message:"Number of ship units is too large!",position:1,timeout:3e3,color:"alert__red"}));var n=Object(h.a)(d),s=n.findIndex((function(e){return e.po_no===c&&e.item_no===i})),a=n.find((function(e){return e.po_no===c&&e.item_no===i}));n[s]=Object(b.a)(Object(b.a)({},a),{},{ship_qty:parseInt(t)});var r=n.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),l=g.filter((function(e){return e.size_start<=r&&e.size_end>=r}));n=n.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{sample_qty:Math.round(e.ship_qty/r*l[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/r*l[0]["25sample"])})})),j(n);var m=n.filter((function(e){return e.po_no===c})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),p=Object(h.a)(u),O=p.findIndex((function(e){return e.po_no===c})),f=p.find((function(e){return e.po_no===c}));p[O]=Object(b.a)(Object(b.a)({},f),{},{ship_qty:m}),v(p)}}),readOnly:l?"":"readOnly"})}),Object(m.jsx)("div",{children:e.sample_qty}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"number",id:"itemTotal_InspectQty",name:"itemTotal_InspectQty",value:e.inspect_qty||1,min:"1",max:"30000",onChange:Q(e.po_no,e.item_no),readOnly:l?"":"readOnly"})}),Object(m.jsx)("div",{children:l?Object(m.jsx)("i",{className:"fa fa-times clickable clickrow",onClick:function(){!function(e,t){var c=d.filter((function(c){return!(c.item_no===e&&c.po_no===t)}));C(c)}(e.item_no,e.po_no)}}):null})]},t);var c,i})):null})]}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"itemTotal_Header2",children:[Object(m.jsx)("div",{}),Object(m.jsxs)("div",{children:["By Item",Object(m.jsx)("i",{className:"fa fa-chevron-circle-up clickable",onClick:function(){U(0,"asc")}}),"\xa0",Object(m.jsx)("i",{className:"fa fa-chevron-circle-down clickable",onClick:function(){U(0,"desc")}})]}),Object(m.jsx)("div",{children:"Ship"}),Object(m.jsx)("div",{children:"Sample"}),Object(m.jsx)("div",{children:"Inspect"}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]}),Object(m.jsx)("div",{id:"scroller",className:"itemTotal_GridContainer",children:A?A.map((function(e,t){return Object(m.jsxs)("div",{className:"itemTotal_Detail",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:e.item_no}),Object(m.jsx)("div",{children:e.ship_qty}),Object(m.jsx)("div",{children:e.sample_qty}),Object(m.jsx)("div",{children:e.inspect_qty}),Object(m.jsx)("div",{})]},t)})):null})]}),D?Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"itemTotal_Header",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:" Total :"}),Object(m.jsx)("div",{children:p}),Object(m.jsx)("div",{children:f}),Object(m.jsx)("div",{className:f!==O?"highlightSection":null,children:O}),Object(m.jsx)("div",{})]})}):Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"itemTotal_Header2",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:" Total :"}),Object(m.jsx)("div",{children:p}),Object(m.jsx)("div",{children:f}),Object(m.jsx)("div",{className:f!==O?"highlightSection":null,children:O}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]})})]})]})},O=function(e){var t=e.editMode,c=e.defects,n=e.setDisplayAlert,s=e.setDefectLanguage,r=e.defectLanguage,l=e.defectList,o=e.showFull,d=e.addToDefectList,j=Object(i.useState)("Select"),u=Object(a.a)(j,2),b=u[0],p=u[1],O=Object(i.useState)(""),f=Object(a.a)(O,2),_=f[0],x=f[1],v=Object(i.useState)(""),g=Object(a.a)(v,2),y=g[0],S=g[1],N=Object(i.useState)(""),C=Object(a.a)(N,2),k=C[0],w=C[1],M=Object(i.useState)(""),P=Object(a.a)(M,2),I=P[0],T=P[1],D=Object(i.useState)(""),F=Object(a.a)(D,2),q=F[0],R=F[1],A=Object(i.useState)(""),E=Object(a.a)(A,2),L=E[0],U=E[1],B=Object(i.useState)([]),H=Object(a.a)(B,2),Q=H[0],z=H[1],K=Object(i.useState)([]),G=Object(a.a)(K,2),J=G[0],Y=G[1],W=Object(i.useCallback)((function(e,t){var c="";switch(e){case"defect":c=(c=(c=l.filter((function(e){return e.product===t&&e.lang===r}))).map((function(e){var t=e.defect_area,c=e.defect_code;return{code_area:"".concat(c,"~",t)}}))).map((function(e){return e.code_area})),c=Object(h.a)(new Set(c)).sort(),z(c);break;case"detail":var i=t.split("~")[0];c=(c=(c=l.filter((function(e){return e.product===b&&e.lang===r&&e.defect_code===i}))).map((function(e){var t=e.defect_detail_code,c=e.defect_detail;return{code_detail:"".concat(t,"~",c)}}))).map((function(e){return e.code_detail})),c=Object(h.a)(new Set(c)).sort(),Y(c)}}),[l,b,r]);Object(i.useEffect)((function(){b&&"Select"!==b&&W("defect",b)}),[b,W]),Object(i.useEffect)((function(){o?o&&c.length>0?p(c[0].product):o&&0===c.length&&(p(""),x("Select"),R(""),U(""),S(""),T("")):(x(""),S(""),R(""),U(""))}),[o,c]);return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsxs)("div",{className:"defectOption_header",children:[Object(m.jsx)("div",{children:"Language"}),Object(m.jsx)("div",{children:"\xa0\xa0\xa0\xa0"}),Object(m.jsx)("div",{children:Object(m.jsxs)("select",{className:"defectOption_language  clickable",onChange:function(e){var t=e.target.value;0!==l.filter((function(e){return e.product===b&&e.lang===t})).length?(s(t),x("Select"),Y([])):n({message:"No product selected or Language has NOT been set for this product !!",position:2,timeout:2500,color:"alert__red"})},value:r,children:[Object(m.jsx)("option",{value:"en",children:"English"}),Object(m.jsx)("option",{value:"zh",children:"Chinese"})]})})]}),Object(m.jsxs)("div",{className:"defectOption",children:[Object(m.jsx)("div",{className:"defectOption_product",children:Object(m.jsxs)("select",{onChange:function(e){var t=e.target.value;if(0!==l.filter((function(e){return e.product===t&&e.lang===r})).length){if("disabled"===(c.length>0?"disabled":null)){if(t!==c[0].product)return void n({message:"Product '"+c[0].product+"' has already been chosen !! Please empty all defects if you decide to change product ! ",position:2,timeout:2500,color:"alert__red"});document.getElementById("defectOptionsProduct").value=c[0].product,document.getElementById("defectOptionsDefectArea").value="Select",p(c[0].product)}else p(t);W("defect",t),x("Select"),R(""),U(""),S(""),T("")}else n({message:"No product selected or Language has NOT been set for this product !!",position:2,timeout:2500,color:"alert__red"})},id:"defectOptionsProduct",className:"clickable",value:b,children:[Object(m.jsx)("option",{value:"Select",children:"Select"}),Object(m.jsx)("option",{value:"Fashion Jewelry",disabled:t?"":"disabled",children:"Fashion Jewelry"}),Object(m.jsx)("option",{value:"Footwear",disabled:t?"":"disabled",children:"Footware"}),Object(m.jsx)("option",{value:"Handbags",disabled:t?"":"disabled",children:"Handbags"}),Object(m.jsx)("option",{value:"Hardlines",disabled:t?"":"disabled",children:"Hardlines"}),Object(m.jsx)("option",{value:"Softlines",disabled:t?"":"disabled",children:"Softlines"})]})}),Object(m.jsx)("div",{className:"defectOption_defectArea",children:Object(m.jsxs)("select",{onChange:function(e){var t=e.target.value,c=t.split("~");S(c[0]),x(c[1]),W("detail",t),w("Select"),R(""),U("")},id:"defectOptionsDefectArea",className:"clickable",value:y+"~"+_,children:[Object(m.jsx)("option",{value:"Select",children:"Select"}),Q.map((function(e,c){return Object(m.jsx)("option",{value:e,disabled:t?"":"disabled",children:e},c)}))]})}),Object(m.jsx)("div",{className:"defectOption_defectDetail",children:Object(m.jsxs)("select",{onChange:function(e){var t=e.target.value.split("~");T(t[0]),w(t[1]),R(""),U("")},id:"defectOptionsDefectDetail",className:"clickable",value:I+"~"+k,children:[Object(m.jsx)("option",{value:"Select",children:"Select"}),J.map((function(e,c){return Object(m.jsx)("option",{value:e,disabled:t?"":"disabled",children:e},c)}))]})}),Object(m.jsx)("div",{className:"defectOption_major",children:Object(m.jsx)("input",{type:"number",name:"major",placeholder:" Major",value:q,min:"0",max:"99",onChange:function(e){var t=e.target.value;R(t)},readOnly:t?"":"readOnly"})}),Object(m.jsx)("div",{className:"defectOption_minor",children:Object(m.jsx)("input",{type:"number",name:"minor",placeholder:" Minor",value:L,min:"0",max:"99",onChange:function(e){var t=e.target.value;U(t)},readOnly:t?"":"readOnly"})}),Object(m.jsx)("div",{children:t?Object(m.jsx)("button",{onClick:function(){!function(t){var c=isNaN(parseInt(q)),i=isNaN(parseInt(L));"Select"===b||"Select"===_||"Select"===k?e.setDisplayAlert({message:"Please make sure you select Product, Defect and Defect Detail ! ",position:2,timeout:2500,color:"alert__red"}):c||i||q<1&&L<1?e.setDisplayAlert({message:"Please make sure you enter either Major and Minor quantity ! ",position:2,timeout:2500,color:"alert__red"}):d(b,_,k,q,L,y,I,r)}()},children:"Add"}):null}),Object(m.jsx)("div",{})]})]})},f=function(e){var t=e.defects,c=e.editMode,n=e.isCriticalDefect,s=e.defectLanguage,a=e.defectList;function r(e,t,c){return a.filter((function(i){return i.product===e&&i.defect_code===t&&i.defect_detail_code===c&&i.lang===s}))[0]}return Object(m.jsx)(i.Fragment,{children:Object(m.jsxs)("div",{className:"defectList",children:[Object(m.jsxs)("div",{className:"defectList_gridHeader",children:[Object(m.jsx)("div",{children:"Product"}),Object(m.jsx)("div",{children:"Defect"}),Object(m.jsx)("div",{children:"Defect Detail"}),Object(m.jsxs)("div",{className:"defectList_major_header",children:["Major/",Object(m.jsx)("br",{}),"Critical"]}),Object(m.jsx)("div",{className:"defectList_minor_header",children:"Minor"}),Object(m.jsx)("div",{children:"Delete"})]}),t.length>0?t.map((function(t){return Object(m.jsxs)("div",{className:"defectList_gridDetail",children:[Object(m.jsx)("div",{className:"defectList_gridItem defectList_product",children:t.product}),Object(m.jsx)("div",{className:"defectList_gridItem defectList_defectArea",children:t.defect_area_code+"~"+r(t.product,t.defect_area_code,t.defect_detail_area).defect_area}),Object(m.jsx)("div",{className:"defectList_gridItem  defectList_defectDetail",style:{color:n(t.product,t.defect_detail_area)?"red":"inherit"},children:Object(m.jsx)("span",{children:t.defect_detail_area+"~"+r(t.product,t.defect_area_code,t.defect_detail_area).defect_detail})}),Object(m.jsx)("div",{className:"defectList_major",children:t.major}),Object(m.jsx)("div",{className:"defectList_minor",children:t.minor}),Object(m.jsx)("div",{className:"defectList_deleteButton",children:c?Object(m.jsx)("button",{onClick:function(){e.deleteDefect(t.id)},children:"\xd7"}):null}),Object(m.jsx)("div",{})]},t.id)})):Object(m.jsx)("div",{children:Object(m.jsx)("div",{colSpan:3,children:"No Defects"})})]})})},_=function(e){var t=e.alert,c="alert ".concat(t.color);return Object(m.jsx)("h5",{className:c,children:t.message})},x=function(e){var t=e.editMode,c=e.checkList;c.sort((function(e,t){return e.id-t.id}));var i=function(c,i){var n=[];if(t){var s=(n=88===c?["Select","Yes","No","Select"]:["Select","OK","NA","X","NI"]).findIndex((function(e){return e===i.result}));4===s?s=1:s+=1;var a=n[s];e.handleCheckItemChange(c,Object(b.a)(Object(b.a)({},i),{},{result:a}))}};return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(m.jsx)("div",{className:"checkList_header",children:"Basic Check List"}),Object(m.jsxs)("div",{className:"checkFormGrid",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("table",{id:"checkListTable",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{width:"40%",children:"Category"}),Object(m.jsx)("th",{width:"40%",children:"Item"}),Object(m.jsx)("th",{width:"20%",children:"Result"})]})}),Object(m.jsx)("tbody",{children:c?c.filter((function(e){return e.id>0&&e.id<=42})).map((function(e){return Object(m.jsxs)("tr",{children:[e.category?Object(m.jsx)("td",{children:e.category}):null,e.category?Object(m.jsx)("td",{children:e.item}):0===e.id?Object(m.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(m.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(m.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(m.jsx)("td",{className:"clickable checkCellResult",onClick:function(){i(e.id,e)},children:e.result}):null]},e.id)})):null})]})}),Object(m.jsx)("div",{className:"checkFormGridCell",children:Object(m.jsxs)("table",{id:"checkListTable",className:"fixed",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{width:"40%",children:"Category"}),Object(m.jsx)("th",{width:"40%",children:"Item"}),Object(m.jsx)("th",{width:"20%",children:"Result"})]})}),Object(m.jsx)("tbody",{children:c?c.filter((function(e){return e.id>=43&&e.id<=68})).map((function(e){return Object(m.jsxs)("tr",{children:[e.category?Object(m.jsx)("td",{children:e.category}):null,e.category?Object(m.jsx)("td",{children:e.item}):0===e.id?Object(m.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(m.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(m.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(m.jsx)("td",{className:"clickable checkCellResult",onClick:function(){i(e.id,e)},children:e.result}):null]},e.id)})):null})]})}),Object(m.jsx)("div",{className:"checkFormGridCell",children:Object(m.jsxs)("table",{id:"checkListTable",className:"fixed",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{width:"40%",children:"Category"}),Object(m.jsx)("th",{width:"40%",children:"Item"}),Object(m.jsx)("th",{width:"20%",children:"Result"})]})}),Object(m.jsx)("tbody",{children:c?c.filter((function(e){return e.id>=81})).map((function(e){return Object(m.jsxs)("tr",{children:[e.category?Object(m.jsx)("td",{children:e.category}):null,e.category?Object(m.jsx)("td",{children:e.item}):0===e.id?Object(m.jsx)("td",{className:"checkCellSeparation",colSpan:"3"}):e.separator?Object(m.jsx)("td",{className:"checkCellSeparationHeader",colSpan:"3",children:e.separator}):Object(m.jsx)("td",{colSpan:"2",children:e.item}),e.category||e.item?Object(m.jsx)("td",{className:"clickable checkCellResult",onClick:function(){i(e.id,e)},children:e.result}):null]},e.id)})):null})]})})]})]})},v=c(8),g=function(e){var t=e.setDisplayAlert,c=e.inspectionID,n=e.currentSU,s=e.currentMF,r=e.setShowSharePointFiles,l=e.sharePointPath,o=e.inspectionDate,b=e.setUploadResult,h=Object(i.useState)(),p=Object(a.a)(h,2),O=p[0],f=p[1],_=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){var i,a,u,h,m;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=O.file,a=o.substr(5,2)+"/"+o.substr(8,2)+"/"+o.substr(0,4),u={headers:{inspection_id:c.mc+"-"+c.iteration+"-"+c.type,relative_url:l.concat("/","SU",n,"MF",s),inspection_date:a}},e.prev=3,r(!1),b([]),h=Object(j.a)().mark((function e(c){var n,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("files[]",i[c]),e.prev=2,e.next=5,Object(v.trackPromise)(d.a.post("/api/upload",n,u),"sharePointUpload");case 5:t({message:"Successfully uploaded "+i[c].name+" !!",position:4,timeout:3e3,color:"alert__green"}),b((function(e){return e.concat({file:i[c].name,status:"Complete",reason:"N/A"})})),e.next=17;break;case 9:e.prev=9,e.t0=e.catch(2),s="File name may have some special character(s) or the upload time is over 30s !",void 0!==e.t0.message&&(e.t0.message.includes("501")?s="File name has already existed for this manufacturer !":e.t0.message.includes("502")&&(s="Your file type is not allowed !")),s="File '"+i[c].name+"' : "+s,t({message:s,position:4,timeout:5e3,color:"alert__red"}),b((function(e){return e.concat({file:i[c].name,status:"Failed",reason:s})}));case 17:case"end":return e.stop()}}),e,null,[[2,9]])})),m=0;case 8:if(!(m<i.length)){e.next=13;break}return e.delegateYield(h(m),"t0",10);case 10:m++,e.next=8;break;case 13:document.getElementById("sharePoint_file").value=null,e.next=19;break;case 16:e.prev=16,e.t1=e.catch(3),t({message:"Unexpected upload error !!",osition:3,timeout:5e3,color:"alert__red"});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(i.Fragment,{children:Object(m.jsx)("div",{className:"uploadDoc",children:Object(m.jsxs)("form",{children:[Object(m.jsx)("input",{type:"file",multiple:!0,name:"file",id:"sharePoint_file",onChange:function(e){f({file:e.target.files})}}),Object(m.jsx)("button",{type:"button",onClick:_,children:"Upload files"})]})})})},y=c(59),S=function(e){var t=Object(v.usePromiseTracker)({area:e.area}).promiseInProgress,c=e.spinnerMessage;return t&&Object(m.jsxs)("div",{style:{marginTop:"0.5rem",width:"100%",height:"30",display:"flex",justifyContent:"center",alignItems:"center",color:"green",fontWeight:"bold"},children:[c,Object(m.jsx)(y.a,{color:"green",height:30,width:100})]})},N=function(e){var t=e.checkDuplicateID,c=e.mcTable,n=e.setDisplayAlert,s=e.inspectionID,a=e.setInspectionID,r=e.clearScreen,l=e.searchInspByMC,o=e.editMode,d=e.inspType,j=e.showFull,u=function(e){var t=e.target.id,c=e.target.value;switch(t){case"searchKey_mc":a(Object(b.a)(Object(b.a)({},s),{},{mc:c})),c.length>=3?l(c):r();break;case"searchKey_iteration":a(Object(b.a)(Object(b.a)({},s),{},{iteration:c}));break;case"searchKey_type":a(Object(b.a)(Object(b.a)({},s),{},{type:c}))}};var h=function(e){n({message:e,position:0,timeout:3e3,color:"alert__red"})};return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsxs)("div",{className:"searchKey",children:[Object(m.jsxs)("div",{className:"searchKey_pair",children:[Object(m.jsx)("label",{children:"MC# : "}),Object(m.jsx)("input",{type:"text",name:"searchKey_mc",id:"searchKey_mc",onChange:u,readOnly:j?"readOnly":""})]}),Object(m.jsxs)("div",{className:"searchKey_pair",children:[Object(m.jsx)("label",{children:"Iteration : "}),Object(m.jsx)("input",{type:"number",name:"searchKey_iteration",id:"searchKey_iteration",placeholder:"Iteration",min:"1",max:"9",onChange:u,readOnly:j?"readOnly":""})]}),Object(m.jsxs)("div",{className:"searchKey_pair",children:[Object(m.jsx)("label",{children:"Type : "}),Object(m.jsxs)("select",{name:"searchKey_type",id:"searchKey_type",onChange:u,children:[Object(m.jsx)("option",{value:"Select",disabled:j?"disabled":"",children:"Select"}),d&&d.map((function(e){return Object(m.jsx)("option",{value:e.insp_type,disabled:j?"disabled":"",children:e.insp_type_long},e.insp_type)}))]})]}),Object(m.jsx)("div",{}),o?null:Object(m.jsx)("div",{children:""!==s.mc&&"Select"!==s.iteration&&""!==s.iteration&&"Select"!==s.type?Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){!function(e){var i=c.find((function(t){return t.mc_no===e.mc}));r(),i?t(e):h("This MC doesn't exists or it doesn't belong to this manufacturer!")}(s)},children:"Create Inspection"})}):null})]}),Object(m.jsx)(S,{area:"searchKey"})]})},C=function(e){var t=e.handleSave,c=e.handleDelete,n=e.handleSearch,s=e.inspectionID,a=e.printReport,r=e.editMode,l=e.setEditMode,o=e.userProfile,d=e.misc,j=e.showFull,u=e.clearScreen,b=e.updateHistory,h=e.setDisplayAlert,p=e.oldMC,O=d.submitted,f=void 0!==o.ignore_submit&&o.ignore_submit,_=function(e){var i=e.target.id;if(l(!1),"save"===i&&t(!!O,!1),"saveAndEdit"===i&&t(!!O,!0),"edit"===i){if(p.current)return void h({message:"You can NOT edit inspecton with obsolete MC.  This is for view only !",position:0,timeout:2500,color:"alert__red"});l(!0)}"delete"===i&&c(s),"search"===i&&(l(!1),n(s)),"print"===i&&a("Inspection_Report.xlsx",!1),"print_draft"===i&&a("Inspection_Report.xlsx",!0),"cancel"===i&&(l(!1),u())};return Object(m.jsx)(i.Fragment,{children:Object(m.jsxs)("div",{className:"mainMenu",children:[Object(m.jsxs)("div",{className:"mainMenu_inspectionKey",children:["Inspection Key : \xa0\xa0",O&&j?Object(m.jsx)("i",{className:"fa fa-lock mainMenu_lock clickable",onClick:function(){f?!0===window.confirm("Are you sure you want to unlock this inspeciton ? ")&&t(!1):alert("You have no rights to unlock this inspeciton !")}}):null,!O&&j?Object(m.jsx)("i",{className:"fa fa-unlock mainMenu_unlock clickable",onClick:function(){!0===window.confirm("Are you sure you want to submit or lock this inspeciton ? ")&&t(!0)}}):null]}),r?Object(m.jsx)("button",{id:"saveAndEdit",onClick:_,children:"Save & Edit"}):null,r?Object(m.jsx)("button",{id:"save",onClick:_,children:"Save"}):null,r?null:Object(m.jsx)("button",{id:"search",onClick:_,children:"Search"}),r||!j||O&&!f?null:Object(m.jsxs)("button",{id:"edit",onClick:_,children:["Edit\xa0",O&&j?Object(m.jsx)("i",{className:"fa fa-lock"}):null]}),!j||O&&!f?null:Object(m.jsx)("button",{id:"cancel",onClick:_,children:"Cancel"}),!r&&O?Object(m.jsx)("button",{id:"print",onClick:_,children:"Print"}):null,r||O||!j?null:Object(m.jsx)("button",{id:"print_draft",onClick:_,children:"Print"}),j&&f&&j&&b.length>0?Object(m.jsx)("button",{id:"delete",onClick:_,className:"deleteButton",children:"Delete"}):null]})})},k=function(e){for(var t=e.setInspectionID,c=e.handleSearch,n=e.searchedMC,s=e.setShowSearchedMC,a=e.currentMF,r=[],l=0;l<n.length;l++)n[l].main.mf_no===a&&r.push(n[l]._id);return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsxs)("div",{className:"searchedMC",children:[Object(m.jsxs)("div",{className:"searchedMC_header1 searchedMC_header",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:"MC"}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(m.jsxs)("div",{className:"searchedMC_header2 searchedMC_header",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:"MC"}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),Object(m.jsxs)("div",{className:"searchedMC_header3 searchedMC_header",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:"MC"}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:"Iteration"}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:"Type"})]}),r.length>0?r.map((function(e,i){return Object(m.jsxs)("div",{className:"searchedMC_detail",onClick:function(){var i;i={mc:e.mc,iteration:e.iteration,type:e.type},t(i),c(i),document.getElementById("searchKey_mc").value=i.mc,document.getElementById("searchKey_iteration").value=i.iteration,document.getElementById("searchKey_type").value=i.type,s(!1)},children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:e.mc}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:e.iteration}),Object(m.jsx)("div",{className:"searchedMC_detail_center",children:e.type})]},i)})):null]}),Object(m.jsx)(S,{area:"mfrSelection"})]})},w=function(e){var t=e.currentSU,c=e.currentMF,n=e.currentSUName,s=e.currentMFName,a=e.setSelectingSupplier,r=e.setShowFull,l=e.setMFRsearch;return Object(m.jsx)(i.Fragment,{children:t?Object(m.jsxs)("div",{className:"supplierInfo",children:[Object(m.jsx)("button",{onClick:function(){r(!1),l(""),a(!0)},children:"Select"}),Object(m.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoSU",id:"supplierInfo_bar",children:[n.toLowerCase()," (",t,")"]}),Object(m.jsxs)("div",{className:"supplierInfo_capitalize supplierInfoMF",children:[s.toLowerCase()," (",c,")"]})]}):null})},M=function(e){var t=e.partyTable,c=e.setCurrentSU,n=e.setCurrentMF,s=e.setCurrentSUName,a=e.setCurrentMFName,r=e.selectingSupplier,l=e.setSelectingSupplier,o=e.setMFRsearch,d=e.mfrSearch,j=e.getMCtable,u=e.setEditMode;return Object(m.jsxs)(i.Fragment,{children:[t&&r?Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"mfrSelection_header",children:" Select a manufacturer below:"}),Object(m.jsx)("div",{className:"mfrSelection_input",children:Object(m.jsx)("input",{type:"text",id:"mfrSearch",name:"mfrSearch",value:d||"",justify:"left",onChange:function(e){var t=e.target.value;o(t.toUpperCase())},style:{textTransform:"uppercase"},placeholder:"Type to search"})})]}):null,t&&r?t.filter((function(e){return 0===d.length||"".concat(" ",e.SU_NAME," ",e.SU," ",e.MF," ",e.MF_NAME).search(d)>0})).map((function(e){return Object(m.jsxs)("div",{className:"mfrSelection",onClick:function(){var t,i,r,o;t=e.SU,i=e.MF,r=e.SU_NAME,o=e.MF_NAME,c(t),n(i),s(r),a(o),l(!1),j(t,i),u(!1)},children:[Object(m.jsxs)("div",{className:"mfrSelectionSU",children:[e.SU_NAME," (",e.SU,")"," "]}),Object(m.jsxs)("div",{className:"mfrSelectionMF",children:[e.MF_NAME," (",e.MF,")"," "]})]},e.SU.concat(e.MF))})):null]})},P=c(56),I=c.n(P),T=function(e){var t=e.setInspectionDate,c=e.inspectionDate,n=e.setMisc,s=e.misc,r=e.editMode,l=e.mqaMembers,o=e.packTypes,d=e.userProfile,j=e.productCategories,u=Object(i.useState)(""),h=Object(a.a)(u,2),p=h[0],O=h[1];Object(i.useEffect)((function(){if(""===c){var e=new Date,i=6e4*e.getTimezoneOffset();e=new Date(e.getTime()-i),t(e.toISOString().substring(0,10))}}),[c,t]),Object(i.useEffect)((function(){var e=Object(b.a)({},s);void 0===e.qa_type&&void 0!==d&&void 0!==d.email&&(d.email.includes("@macys.com")?(e=Object(b.a)(Object(b.a)({},e),{},{qa_type:"MQA"}),n(e)):(e=Object(b.a)(Object(b.a)({},e),{},{qa_type:"SQA",sqa:d.email,governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),O(!0),n(e))),"SQA"===s.qa_type&&O(!0)}),[s,d,n]);var f=function(e,t){return function(c){var i=c.target.value;if(s){var a=Object(b.a)({},s);switch(e){case 2:a=Object(b.a)(Object(b.a)({},a),{},{product_type:i});break;case 3:a=Object(b.a)(Object(b.a)({},a),{},{lab_test_report:i});break;case 4:a=Object(b.a)(Object(b.a)({},a),{},{lab_child_safety_report:i});break;case 5:a=Object(b.a)(Object(b.a)({},a),{},{fibre_content:i});break;case 6:a=Object(b.a)(Object(b.a)({},a),{},{comments:i});break;case 7:a=Object(b.a)(Object(b.a)({},a),{},{governance_inspection:t});break;case 8:a=Object(b.a)(Object(b.a)({},a),{},{props65_report:i});break;case 9:a=Object(b.a)(Object(b.a)({},a),{},{ship_mode:i});break;case 10:a=Object(b.a)(Object(b.a)({},a),{},{pack_pct:i});break;case 11:a=Object(b.a)(Object(b.a)({},a),{},{ship_window:i});break;case 12:a=Object(b.a)(Object(b.a)({},a),{},{carton_list:i});break;case 13:a=Object(b.a)(Object(b.a)({},a),{},{carton_total:i});break;case 14:a=Object(b.a)(Object(b.a)({},a),{},{pack_type:i});break;case 15:a=Object(b.a)(Object(b.a)({},a),{},{qa_type:i}),"SQA"===i&&(a=Object(b.a)(Object(b.a)({},a),{},{sqa:d.email,governance_inspection:void 0,sqa_iteration:void 0,cap:void 0}),O(!0)),"MQA"===i&&void 0===a.mqa&&(a=Object(b.a)(Object(b.a)({},a),{},{mqa:d.email})),"MQA"===i&&O(!1);break;case 16:a=Object(b.a)(Object(b.a)({},a),{},{mqa:i});break;case 17:a=Object(b.a)(Object(b.a)({},a),{},{sqa:i});break;case 18:a=Object(b.a)(Object(b.a)({},a),{},{correlation_inspection:t});break;case 19:a=Object(b.a)(Object(b.a)({},a),{},{product_category:i});break;case 20:a=Object(b.a)(Object(b.a)({},a),{},{label:i});break;case 21:a=Object(b.a)(Object(b.a)({},a),{},{sqa_iteration:i});break;case 22:a=Object(b.a)(Object(b.a)({},a),{},{cap:t});break;default:console.log("No element")}n(a)}}};return Object(m.jsxs)("div",{className:"misc",children:[Object(m.jsx)("div",{className:"misc_a",children:Object(m.jsxs)("div",{className:"misc_title misc_grid_a",children:[Object(m.jsx)("div",{children:"Inspection Date (A)"}),Object(m.jsx)(I.a,{className:"datePicker",dateFormat:"MM/dd/yy",selected:function(e){var t=e;if(""===t){var c=6e4*(t=new Date).getTimezoneOffset();t=new Date(t.getTime()-c)}else{var i=6e4*(t=new Date(e)).getTimezoneOffset();t=new Date(t.getTime()+i)}return t}(c),onChange:function(e){return function(e){var c=6e4*e.getTimezoneOffset(),i=new Date(e.getTime()-c);t(i.toISOString().substring(0,10))}(e)},readOnly:r?"":"readOnly"})]})}),Object(m.jsxs)("div",{className:"misc_g misc_grid_g "+(p?"misc_protect":void 0),children:[Object(m.jsx)("div",{className:"misc_title",children:"Governance Inspection (G)"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"radio",id:"misc_governance_inspection_yes",name:"misc_governance_inspection",value:s.governance_inspection||"",checked:"Yes"===s.governance_inspection,onChange:f(7,"Yes"),disabled:r&&!p?"":"disabled"})}),Object(m.jsx)("div",{children:"Yes"}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"radio",id:"misc_governance_inspection_no",name:"misc_governance_inspection",value:s.governance_inspection||"",checked:"No"===s.governance_inspection,onChange:f(7,"No"),disabled:r&&!p?"":"disabled"})}),Object(m.jsx)("div",{children:"No"})]}),Object(m.jsxs)("div",{className:"misc_t misc_grid_t "+(p?"misc_protect":void 0),children:[Object(m.jsx)("div",{className:"misc_title",children:"Governance SQA Iteration (T)"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"number",name:"misc_sqa_iteration",id:"misc_sqa_iteration",value:s.sqa_iteration||"",placeholder:"",min:"1",max:"99",onChange:f(21),disabled:r&&!p?"":"disabled"})})]}),Object(m.jsxs)("div",{className:"misc_q misc_grid_q",children:[Object(m.jsx)("div",{className:"misc_title",children:"Correlation Inspection (Q)"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"radio",id:"misc_correlation_inspection",name:"misc_correlation_inspection",value:s.correlation_inspection||"",checked:"Yes"===s.correlation_inspection,onChange:f(18,"Yes"),disabled:r?"":"disabled"})}),Object(m.jsx)("div",{children:"Yes"}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"radio",id:"misc_correlation_inspection",name:"misc_correlation_inspection",value:s.correlation_inspection||"",checked:"No"===s.correlation_inspection,onChange:f(18,"No"),disabled:r?"":"disabled"})}),Object(m.jsx)("div",{children:"No"})]}),Object(m.jsxs)("div",{className:"misc_j misc_grid_j",children:[Object(m.jsx)("div",{className:"misc_title",children:"Pack % During Inspection (J)"}),Object(m.jsx)("input",{type:"text",id:"misc_packPct",name:"misc_packPct",value:s.pack_pct||"",justify:"left",placeholder:"%",onChange:f(10),readOnly:r?"":"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_k misc_grid_k",children:[Object(m.jsx)("div",{className:"misc_title",children:"Ship Window (K)"}),Object(m.jsx)("input",{type:"text",id:"misc_shipWindow",name:"misc_shipWindow",value:s.ship_window||"",justify:"left",placeholder:"Ship Window",onChange:f(11),readOnly:r?"":"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_b misc_grid_b",children:[Object(m.jsx)("div",{className:"misc_title",children:"Product Type (B)"}),Object(m.jsx)("input",{type:"text",id:"misc_productType",name:"misc_productType",value:s.product_type||"",justify:"left",placeholder:"Product Type",onChange:f(2),readOnly:r?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(m.jsxs)("div",{className:"misc_s misc_grid_s",children:[Object(m.jsx)("div",{className:"misc_title",children:"Brand (S)"}),Object(m.jsx)("input",{type:"text",id:"misc_label",name:"misc_label",value:s.label||"",justify:"left",onChange:f(20),readOnly:r?"":"readOnly",style:{textTransform:"uppercase"}})]}),Object(m.jsxs)("div",{className:"misc_n misc_grid_n",children:[Object(m.jsx)("div",{className:"misc_title",children:"Pack Type (N)"}),Object(m.jsxs)("select",{id:"misc_pack_type",name:"misc_pack_type",value:s.pack_type||"Select",justify:"left",placeholder:" ",onChange:f(14),children:[Object(m.jsx)("option",{value:"Select",children:"Select"}),o&&o.map((function(e){return Object(m.jsx)("option",{value:e.type,disabled:r?"":"disabled",children:e.type},e.type)}))]})]}),Object(m.jsxs)("div",{className:"misc_o misc_grid_o",children:[Object(m.jsx)("div",{className:"misc_title",children:"QA Type (O)"}),Object(m.jsxs)("select",{id:"misc_qaType",name:"misc_qaType",value:s.qa_type||"Select",justify:"left",placeholder:"QA Type",onChange:f(15),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"MQA",disabled:"disabled",children:"MQA"}),Object(m.jsx)("option",{value:"SQA",disabled:"disabled",children:"SQA"})]})]}),Object(m.jsxs)("div",{className:"misc_c misc_grid_c",children:[Object(m.jsx)("div",{className:"misc_title",children:"Lab Test Report (C)"}),Object(m.jsxs)("select",{id:"misc_labTest",name:"misc_labTest",value:s.lab_test_report||"Select",justify:"left",placeholder:"Test result",onChange:f(3),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"N/A",disabled:r?"":"disabled",children:"N/A"}),Object(m.jsx)("option",{value:"Pending",disabled:r?"":"disabled",children:"Pending"}),Object(m.jsx)("option",{value:"Pass",disabled:r?"":"disabled",children:"Pass"}),Object(m.jsx)("option",{value:"Fail",disabled:r?"":"disabled",children:"Fail"})]})]}),Object(m.jsxs)("div",{className:"misc_d misc_grid_d",children:[Object(m.jsx)("div",{className:"misc_title",children:"Child Safety Report (D)"}),Object(m.jsxs)("select",{id:"misc_childSafetyReport",name:"misc_childSafetyReport",value:s.lab_child_safety_report||"Select",justify:"left",placeholder:" ",onChange:f(4),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"N/A",disabled:r?"":"disabled",children:"N/A"}),Object(m.jsx)("option",{value:"Pending",disabled:r?"":"disabled",children:"Pending"}),Object(m.jsx)("option",{value:"Accept",disabled:r?"":"disabled",children:"Accept"}),Object(m.jsx)("option",{value:"Reject",disabled:r?"":"disabled",children:"Reject"})]})]}),Object(m.jsxs)("div",{className:"misc_h misc_grid_h",children:[Object(m.jsx)("div",{className:"misc_title",children:"Props 65 Report (H)"}),Object(m.jsxs)("select",{id:"misc_props65Report",name:"misc_props65Report",value:s.props65_report||"Select",justify:"left",placeholder:" ",onChange:f(8),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"N/A",disabled:r?"":"disabled",children:"N/A"}),Object(m.jsx)("option",{value:"Pending",disabled:r?"":"disabled",children:"Pending"}),Object(m.jsx)("option",{value:"Accept",disabled:r?"":"disabled",children:"Accept"}),Object(m.jsx)("option",{value:"Reject",disabled:r?"":"disabled",children:"Reject"})]})]}),Object(m.jsxs)("div",{className:"misc_i misc_grid_i",children:[Object(m.jsx)("div",{className:"misc_title",children:"Ship Mode (I)"}),Object(m.jsxs)("select",{id:"misc_shipMode",name:"misc_shipMode",value:s.ship_mode||"Select",justify:"left",placeholder:" ",onChange:f(9),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"Ocean",disabled:r?"":"disabled",children:"Ocean"}),Object(m.jsx)("option",{value:"Air",disabled:r?"":"disabled",children:"Air"})]})]}),Object(m.jsxs)("div",{className:"misc_e misc_grid_e",children:[Object(m.jsx)("div",{className:"misc_title",children:"Fibre Content (E)"}),Object(m.jsx)("input",{type:"text",id:"misc_fibreContent",name:"misc_fibreContent",value:s.fibre_content||"",justify:"left",placeholder:"Fibre Content",onChange:f(5),readOnly:r?"":"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_f misc_grid_f",children:[Object(m.jsx)("div",{className:"misc_title",children:"Comments (F)"}),Object(m.jsx)("textarea",{rows:"5",cols:"50",id:"misc_comments",name:"misc_comments",value:s.comments||"",justify:"left",placeholder:"Comments",onChange:f(6),readOnly:r?"":"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_l misc_grid_l",children:[Object(m.jsx)("div",{className:"misc_title",children:"Carton List (L)"}),Object(m.jsx)("textarea",{rows:"3",cols:"50",id:"misc_cartonList",name:"misc_cartonList",value:s.carton_list||"",justify:"left",placeholder:"Carton List",onChange:f(12),readOnly:r?"":"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_m misc_grid_m",children:[Object(m.jsx)("div",{className:"misc_title",children:"Carton Total (M)"}),Object(m.jsx)("input",{type:"text",id:"misc_cartonTotal",name:"misc_cartonTotal",value:s.carton_total||"",justify:"left",placeholder:"Carton Total",onChange:f(13),readOnly:r?"":"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_i misc_grid_i",children:[Object(m.jsx)("div",{className:"misc_title",children:"Ship Mode (I)"}),Object(m.jsxs)("select",{id:"misc_shipMode",name:"misc_shipMode",value:s.ship_mode||"Select",justify:"left",placeholder:" ",onChange:f(9),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"Ocean",disabled:r?"":"disabled",children:"Ocean"}),Object(m.jsx)("option",{value:"Air",disabled:r?"":"disabled",children:"Air"})]})]}),Object(m.jsxs)("div",{className:"misc_p misc_grid_p",children:[Object(m.jsx)("div",{className:"misc_title",children:"MQA"===s.qa_type||void 0===s.qa_type?Object(m.jsx)("span",{children:"MQA (P)"}):Object(m.jsx)("span",{children:"SQA (P)"})}),"MQA"===s.qa_type||void 0===s.qa_type?Object(m.jsxs)("select",{id:"misc_mqa",name:"misc_mqa",value:s.mqa||"Select",justify:"left",placeholder:" ",onChange:f(16),children:[Object(m.jsx)("option",{value:"Select",children:"Select"}),l&&l.map((function(e){return Object(m.jsx)("option",{value:e.mqa,disabled:r?"":"disabled",children:e.mqa},e.mqa)}))]}):Object(m.jsx)("input",{type:"text",id:"misc_sqa",name:"misc_sqa",value:s.sqa||"",justify:"left",placeholder:"Inspector",onChange:f(17),readOnly:"readOnly"})]}),Object(m.jsxs)("div",{className:"misc_r misc_grid_r",children:[Object(m.jsx)("div",{className:"misc_title",children:"Product Category (R)"}),Object(m.jsxs)("select",{id:"misc_product_category",name:"misc_product_category",value:s.product_category||"Select",justify:"left",placeholder:" ",onChange:f(19),children:[Object(m.jsx)("option",{value:"Select",children:"Select"}),j&&j.map((function(e){return Object(m.jsx)("option",{value:e.category,disabled:r?"":"disabled",children:e.category},e.category)}))]})]}),Object(m.jsxs)("div",{className:"misc_u misc_grid_u "+(p?"misc_protect":void 0),children:[Object(m.jsx)("div",{className:"misc_title",children:"Corrective Action Plan Required (U)"}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"radio",id:"misc_cap",name:"misc_cap",value:s.cap||"",checked:"Yes"===s.cap,onChange:f(22,"Yes"),disabled:r&&!p?"":"disabled"})}),Object(m.jsx)("div",{children:"Yes"}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"radio",id:"misc_cap",name:"misc_cap",value:s.cap||"",checked:"No"===s.cap,onChange:f(22,"No"),disabled:r&&!p?"":"disabled"})}),Object(m.jsx)("div",{children:"No"})]})]})},D=function(e){var t=e.setMisc,c=e.misc,n=e.editMode,s=e.visualResult,a=e.calculateFinalResult;function r(e){return"Failed"===e.packing_result||"Failed"===e.measurement_result|"Failed"===s?"Failed":"Passed"}var l=function(e,i){return function(i){var n=i.target.value;if(c){var s=Object(b.a)({},c);switch(e){case 1:s=Object(b.a)(Object(b.a)({},s),{},{packing_result:n}),s="Failed"===n?Object(b.a)(Object(b.a)({},s),{},{final_result:"Failed"}):Object(b.a)(Object(b.a)({},s),{},{final_result:r(s)});break;case 2:s=Object(b.a)(Object(b.a)({},s),{},{measurement_result:n}),s="Failed"===n?Object(b.a)(Object(b.a)({},s),{},{final_result:"Failed"}):Object(b.a)(Object(b.a)({},s),{},{final_result:r(s)});break;default:console.log("No element")}t(s)}}};return Object(m.jsx)(i.Fragment,{children:Object(m.jsxs)("div",{className:"result",children:[Object(m.jsx)("div",{className:"result_f result_grid_f",children:" Inspection Result Summary"}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsxs)("div",{className:"result_a result_grid_a",children:[Object(m.jsx)("div",{className:"result_title",children:"Packing"}),Object(m.jsxs)("select",{id:"result_packingResult",name:"misc_packingResult",value:c.packing_result||"Select",justify:"left",placeholder:"Packing Result",onChange:l(1),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"N/A",disabled:n?"":"disabled",children:"N/A"}),Object(m.jsx)("option",{value:"Passed",disabled:n?"":"disabled",children:"Passed"}),Object(m.jsx)("option",{value:"Failed",disabled:n?"":"disabled",children:"Failed"})]})]}),Object(m.jsxs)("div",{className:"result_b result_grid_b",children:[Object(m.jsx)("div",{className:"result_title",children:"Measurement"}),Object(m.jsxs)("select",{id:"result_measurementResult",name:"misc_measurementResult",value:c.measurement_result||"Select",justify:"left",placeholder:"Measurement result",onChange:l(2),children:[Object(m.jsx)("option",{value:"Select",disabled:"disabled",children:"Select"}),Object(m.jsx)("option",{value:"Passed",disabled:n?"":"disabled",children:"Passed"}),Object(m.jsx)("option",{value:"Failed",disabled:n?"":"disabled",children:"Failed"})]})]}),Object(m.jsxs)("div",{className:"result_c result_grid_c",children:[Object(m.jsx)("div",{className:"result_title",children:"Critical / Major / Minor"}),Object(m.jsx)("input",{type:"text",id:"result_defectiveResult",name:"result_defectiveResult",value:s.defective_result||"",justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(m.jsxs)("div",{className:"result_d result_grid_d",children:[Object(m.jsx)("div",{className:"result_title",children:"Sample Threshold (Major / Minor)"}),Object(m.jsx)("input",{type:"text",id:"result_sampleThreshold",name:"result_sampleThreshold",value:s.sample_threshold||"",justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(m.jsxs)("div",{className:"result_e result_grid_e",children:[Object(m.jsx)("div",{className:"result_title",children:"Final Result"}),Object(m.jsx)("input",{type:"text",id:"result_finalResult",name:"result_finalResult",value:a(),justify:"left",placeholder:"",readOnly:"readOnly"})]}),Object(m.jsxs)("div",{className:"result_g result_grid_g",children:[Object(m.jsx)("div",{className:"result_title",children:"Visual Result"}),Object(m.jsx)("input",{type:"text",id:"result_visualResult",name:"result_visualResult",value:s.visual_result||"Passed",justify:"left",placeholder:"",readOnly:"readOnly"})]})]})})},F=function(e){var t=e.updateHistory,c=e.showHistory,n=e.setShowHistory,s=e.convertToLocal,a=Object(h.a)(t);a.sort((function(e,t){return Date.parse(e.updated_time)>Date.parse(t.updated_time)?-1:1}));var r=document.querySelector(":root");return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsxs)("div",{className:"changeTrack_section_upper",children:[Object(m.jsx)("div",{children:"Change History"}),Object(m.jsx)("div",{}),Object(m.jsxs)("div",{children:["Show \xa0",Object(m.jsx)("i",{className:"clickable fa fa-plus",onClick:function(){n(!0)}}),"\xa0\xa0Hide \xa0",Object(m.jsx)("i",{className:"clickable fa fa-minus",onClick:function(){n(!1)}})]}),Object(m.jsx)("div",{}),Object(m.jsxs)("div",{children:["Expand \xa0",Object(m.jsx)("i",{className:"clickable fa fa-plus",onClick:function(){r.style.setProperty("--changeTrack_max_height","100rem")}}),"\xa0\xa0 Collapse \xa0",Object(m.jsx)("i",{className:"clickable fa fa-minus",onClick:function(){r.style.setProperty("--changeTrack_max_height","4.3rem")}})]}),Object(m.jsx)("div",{})]}),c?Object(m.jsxs)("div",{className:"changeTrack_section_bottom",children:[Object(m.jsxs)("div",{className:"changeTrack_grid_header",children:[Object(m.jsx)("div",{children:"Local Time"}),Object(m.jsx)("div",{children:"Updated By"}),Object(m.jsx)("div",{children:"Mode"}),Object(m.jsx)("div",{children:"Result Details"}),Object(m.jsx)("div",{})]}),Object(m.jsx)("div",{className:"changeTrack_grid_outer_detail",children:a.length>0?a.map((function(e){return Object(m.jsxs)("div",{className:"changeTrack_grid_detail",children:[Object(m.jsx)("div",{children:s(e.updated_time)}),Object(m.jsx)("div",{children:e.updated_by}),Object(m.jsx)("div",{children:e.updated_mode}),Object(m.jsx)("div",{children:e.misc})]},e.id)})):null})]}):null]})},q=function(e){var t=e.inspectionID,c=e.currentSU,n=e.currentMF,s=e.getSharePointFiles,a=e.setShowSharePointFiles,r=e.showSharePointFiles,l=e.setSharePointFiles,o=e.sharePointPath;e.createsharePointPDF;return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsx)("div",{className:"sharePoint_section",children:"Document Management On SharePoint"}),Object(m.jsxs)("div",{className:"sharePoint_grid",children:[Object(m.jsx)("div",{className:"sharePoint_cell",children:Object(m.jsx)("img",{src:"../static/img/sharePointx.jpg",alt:"sharePoint",className:"sharePoint_photo"})}),Object(m.jsx)("div",{}),Object(m.jsxs)("div",{className:"sharePoint_cell",children:["Go to SharePoint\xa0",Object(m.jsx)("i",{className:"fa  fa-sign-in clickable",onClick:function(){!function(){var e="https://macysinc.sharepoint.com/sites/OSO/".concat(o,"/Forms/AllItems.aspx?id=%2Fsites%2FOSO%2F",o,"%2F","SU",c,"MF",n,"&FilterField1=Inspection_x0020_ID&FilterValue1=",t.mc,"-",t.iteration,"-",t.type,"&dt=",(new Date).getTime());console.log("url",e);var i=window.open(e,"_blank","noopener,noreferrer");i&&(i.opener=null)}()}})]}),Object(m.jsx)("div",{}),null,Object(m.jsxs)("div",{className:"sharePoint_cell",children:["SharePoint Files : \xa0\xa0",r?"Hide":"Show","\xa0",Object(m.jsx)("i",{className:"clickable fa "+(r?"fa-minus":"fa-plus"),onClick:function(){!0===r?(a(!1),l([])):(a(!0),s())}}),"\xa0 \xa0",Object(m.jsx)("i",{id:"sharePoint_refresh",className:"clickable fa fa-refresh",onClick:function(){r&&(l([]),s())}}),"\xa0 \xa0"]})]})]})},R=function(e){var t=e.sharePointFiles,c=e.downloadSharePointFile,n=e.showSharePointFiles,s=e.convertToLocal,a=e.editMode,r=e.handleDeleteSPfile,l=[".jpg",".png"];function o(e){for(var t=0;t<l.length;t++)if(e.toLowerCase().includes(l[t]))return!0;return!1}return Object(m.jsx)(i.Fragment,{children:n?Object(m.jsxs)("div",{className:"showSharePointFiles_section",children:[Object(m.jsxs)("div",{className:"showSharePointFiles_grid_header",children:[Object(m.jsx)("div",{children:"File Name"}),Object(m.jsx)("div",{children:"Last Editor"}),Object(m.jsx)("div",{children:"Last Edit Time"}),Object(m.jsx)("div",{children:"File Size"}),Object(m.jsx)("div",{children:"Download"}),Object(m.jsx)("div",{children:"File Type"}),Object(m.jsx)("div",{children:"Delete"})]}),Object(m.jsx)("div",{children:t.length>0?t.map((function(e,t){return Object(m.jsxs)("div",{className:"showSharePointFiles_grid_detail",children:[Object(m.jsx)("div",{children:e.filename}),Object(m.jsx)("div",{children:"SharePoint App"===e.editor?e.last_editor:e.editor}),Object(m.jsx)("div",{children:s(e.modified)}),Object(m.jsx)("div",{children:e.size}),Object(m.jsx)("div",{children:Object(m.jsx)("i",{className:"clickable fa fa-download",onClick:function(){c(e.filename)}})}),o(e.filename)?Object(m.jsx)("div",{className:"sharePointFiles_photoBlock",children:Object(m.jsx)("img",{src:"/showPhoto?folder="+e.folder+"&filename="+e.filename,alt:""})}):Object(m.jsx)("div",{children:Object(m.jsx)("i",{className:"fa fa-file fa-file-doc"})}),a?Object(m.jsx)("div",{children:Object(m.jsx)("button",{id:"sharePointFiles_deleteButton",onClick:function(){r(e.unique_id)},children:"\xd7"})}):Object(m.jsx)("div",{children:"\xa0"})]},t)})):Object(m.jsxs)("div",{className:"showSharePointFiles_grid_detail",children:[Object(m.jsx)("div",{children:"No Files"}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]},0)})]}):null})},A=function(e){var t=e.uploadResult;return Object(m.jsx)(i.Fragment,{children:Object(m.jsxs)("div",{className:"uploadResult_section",children:[t.length>0?Object(m.jsxs)("div",{className:"uploadResult_grid_header",children:[Object(m.jsx)("div",{children:"Uploaded File"}),Object(m.jsx)("div",{children:"Status"}),Object(m.jsx)("div",{children:"Hint"})]}):null,t.length>0?t.slice(0).reverse().map((function(e,t){return Object(m.jsxs)("div",{className:"uploadResult_grid_detail",children:[Object(m.jsx)("div",{children:e.file}),Object(m.jsx)("div",{className:"Failed"===e.status?"uploadResult_red":null,children:e.status}),Object(m.jsx)("div",{children:e.reason})]},t)})):null]})})},E=c(169),L=function(e){var t=e.position;return Object(m.jsxs)(i.Fragment,{children:[1===t?Object(m.jsx)(S,{area:"getUserProfile",spinnerMessage:"Loading your profile, please wait... "}):null,2===t?Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{area:"printReport",spinnerMessage:"Preparing the report, please wait... "}),Object(m.jsx)(S,{area:"saveInspection",spinnerMessage:"Saving the changes, please wait... "}),Object(m.jsx)(S,{area:"deleteInspection",spinnerMessage:"Deleting, please wait... "}),Object(m.jsx)(S,{area:"createInspection",spinnerMessage:"Loading, please wait... "}),Object(m.jsx)(S,{area:"getMCtable",spinnerMessage:"Getting MC data, please wait... "})]}):null,3===t?Object(m.jsxs)("div",{children:[Object(m.jsx)(S,{area:"sharePointFiles",spinnerMessage:"Refreshing SharePoint info, please wait... "}),Object(m.jsx)(S,{area:"downloadSharePointfiles",spinnerMessage:"Downloading SharePoint info, please wait... "}),Object(m.jsx)(S,{area:"sharePointUpload",spinnerMessage:"Uploading file(s) to SharePoint, please wait... "})]}):null,10===t?Object(m.jsx)(S,{area:"pastInspection",spinnerMessage:"Loading past inspections, please wait... "}):null]})},U=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),c=t[0],n=t[1],s=Object(i.useState)(!1),r=Object(a.a)(s,2),l=r[0],o=r[1],y=Object(i.useState)([]),S=Object(a.a)(y,2),P=S[0],I=S[1],U=Object(i.useState)({position:100}),B=Object(a.a)(U,2),H=B[0],Q=B[1],z=Object(i.useState)([]),K=Object(a.a)(z,2),G=K[0],J=K[1],Y=Object(i.useState)([]),W=Object(a.a)(Y,2),V=W[0],X=W[1],Z=Object(i.useState)(""),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ce=Object(i.useState)({mc:"",iteration:"Select",type:"Select"}),ie=Object(a.a)(ce,2),ne=ie[0],se=ie[1],ae=Object(i.useState)([]),re=Object(a.a)(ae,2),le=re[0],oe=re[1],de=Object(i.useState)([]),je=Object(a.a)(de,2),ue=je[0],be=je[1],he=Object(i.useState)(""),me=Object(a.a)(he,2),pe=me[0],Oe=me[1],fe=Object(i.useState)(""),_e=Object(a.a)(fe,2),xe=_e[0],ve=_e[1],ge=Object(i.useState)([]),ye=Object(a.a)(ge,2),Se=ye[0],Ne=ye[1],Ce=Object(i.useState)([]),ke=Object(a.a)(Ce,2),we=ke[0],Me=ke[1],Pe=Object(i.useState)(""),Ie=Object(a.a)(Pe,2),Te=Ie[0],De=Ie[1],Fe=Object(i.useState)(""),qe=Object(a.a)(Fe,2),Re=qe[0],Ae=qe[1],Ee=Object(i.useState)(!0),Le=Object(a.a)(Ee,2),Ue=Le[0],Be=Le[1],He=Object(i.useState)([]),Qe=Object(a.a)(He,2),ze=Qe[0],Ke=Qe[1],Ge=Object(i.useState)([]),Je=Object(a.a)(Ge,2),Ye=Je[0],We=Je[1],Ve=Object(i.useState)(!1),Xe=Object(a.a)(Ve,2),Ze=Xe[0],$e=Xe[1],et=Object(i.useState)({}),tt=Object(a.a)(et,2),ct=tt[0],it=tt[1],nt=Object(i.useState)({}),st=Object(a.a)(nt,2),at=st[0],rt=st[1],lt=Object(i.useState)(!1),ot=Object(a.a)(lt,2),dt=ot[0],jt=ot[1],ut=Object(i.useState)({}),bt=Object(a.a)(ut,2),ht=bt[0],mt=bt[1],pt=Object(i.useState)([]),Ot=Object(a.a)(pt,2),ft=Ot[0],_t=Ot[1],xt=Object(i.useState)(!1),vt=Object(a.a)(xt,2),gt=vt[0],yt=vt[1],St=Object(i.useState)([]),Nt=Object(a.a)(St,2),Ct=Nt[0],kt=Nt[1],wt=Object(i.useState)(!0),Mt=Object(a.a)(wt,2),Pt=Mt[0],It=Mt[1],Tt=Object(i.useState)([]),Dt=Object(a.a)(Tt,2),Ft=Dt[0],qt=Dt[1],Rt=Object(i.useState)("en"),At=Object(a.a)(Rt,2),Et=At[0],Lt=At[1],Ut=Object(i.useState)([]),Bt=Object(a.a)(Ut,2),Ht=Bt[0],Qt=Bt[1],zt=Object(i.useState)([]),Kt=Object(a.a)(zt,2),Gt=Kt[0],Jt=Kt[1],Yt=Object(i.useState)(),Wt=Object(a.a)(Yt,2),Vt=Wt[0],Xt=Wt[1],Zt=Object(i.useState)(""),$t=Object(a.a)(Zt,2),ec=$t[0],tc=$t[1],cc=Object(i.useState)(""),ic=Object(a.a)(cc,2),nc=ic[0],sc=ic[1],ac=Object(i.useState)(""),rc=Object(a.a)(ac,2),lc=rc[0],oc=rc[1],dc=Object(i.useState)(""),jc=Object(a.a)(dc,2),uc=jc[0],bc=jc[1],hc=Object(i.useState)([]),mc=Object(a.a)(hc,2),pc=mc[0],Oc=mc[1],fc=Object(i.useState)([]),_c=Object(a.a)(fc,2),xc=_c[0],vc=_c[1],gc=Object(i.useState)(0),yc=Object(a.a)(gc,2),Sc=yc[0],Nc=yc[1],Cc=Object(i.useState)(0),kc=Object(a.a)(Cc,2),wc=kc[0],Mc=kc[1],Pc=Object(i.useState)(0),Ic=Object(a.a)(Pc,2),Tc=Ic[0],Dc=Ic[1],Fc=Object(i.useState)([]),qc=Object(a.a)(Fc,2),Rc=qc[0],Ac=qc[1],Ec=Object(i.useRef)(!1),Lc=Object(i.useRef)(""),Uc=Object(i.useRef)(!1),Bc=Object(i.useState)([]),Hc=Object(a.a)(Bc,2),Qc=Hc[0],zc=Hc[1],Kc=Object(i.useState)([]),Gc=Object(a.a)(Kc,2),Jc=Gc[0],Yc=Gc[1];Object(i.useEffect)((function(){var e=document.querySelector(":root"),t=navigator.userAgent.toLowerCase();/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?e.style.setProperty("--changeTrack_scroll_width","7fr"):e.style.setProperty("--changeTrack_scroll_width","6.7fr"),t.includes("safari")&&t.includes("macintosh")&&e.style.setProperty("--changeTrack_scroll_width","7fr"),Object(v.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){be(e.userProfile),J(e.mcTable),Me(e.partyTable),Ke(e.mfList),We(e.aqlTable),qt(e.checkListTemplate),Xt(e.sharePointPath),oc(e.mqaMembers),sc(e.packTypes),bc(e.productCategories),Oc(e.inspType)})).catch((function(e){console.log(e),Zc({message:"SharePoint's user list is not available at this moment, please try again !",position:0,timeout:3e3,color:"alert__red"})})),"getUserProfile"),fetch("/api/getDefectTable",{method:"GET"}).then((function(e){return e.json()})).then((function(e){Qt(e)})).catch((function(e){console.log(e)})),fetch("/api/getCriticalDefects",{method:"GET"}).then((function(e){return e.json()})).then((function(e){Jt(e)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){for(var e="",t="",c="",i=0,n=0,s=0,a=0,r=0;r<P.length;r+=1)P[r].critical?a+=parseInt(P[r].major):parseInt(P[r].major)>0&&(n+=parseInt(P[r].major)),parseInt(P[r].minor)>0&&(s+=parseInt(P[r].minor));if(Sc){var l=Ye.filter((function(e){return e.size_start<=Sc&&e.size_end>=Sc}));e=l[0]["25accept"].toString()+" / "+l[0]["40accept"].toString(),i=l[0]["25accept"],l[0]["40accept"]}a+n+s>0&&(t=" "+a.toString()+" / "+n.toString()+" / "+s.toString(),n+Math.floor(s/4)>i&&(c="Failed")),a>0&&(c="Failed"),"Failed"!==c&&t.length>0&&(c="Passed"),mt({visual_result:c,defective_result:t,sample_threshold:e})}),[P,Ye,Sc]);var Wc=function(e){e=e.trim();var t,c,i,n=document.getElementsByClassName("itemTotal_Detail"),s=n.length,a=-1;for(c=0;c<s;c++)n[c].style.backgroundColor="#0746f54d";for(t=0;t<s;t++){n[t].getElementsByTagName("div")[2].innerHTML.includes(e)&&""!==e&&(n[t].style.backgroundColor="yellow",-1===a&&(a=t))}for(a>0&&(document.getElementById("scroller").scrollTo(0,0),i=document.getElementById("scroller").scrollHeight/s*a,document.getElementById("scroller").scrollBy(0,i)),s=(n=document.getElementsByClassName("itemTable_Detail")).length,a=-1,c=0;c<s;c++)n[c].style.backgroundColor="#0746f54d";for(t=0;t<s;t++){n[t].children[2].innerHTML.includes(e)&&""!==e&&(n[t].style.backgroundColor="yellow",-1===a&&(a=t))}a>0&&(document.getElementById("itemTableScroller").scrollTo(0,0),i=document.getElementById("itemTableScroller").scrollHeight/s*a,document.getElementById("itemTableScroller").scrollBy(0,i))};Object(i.useEffect)((function(){var e=Object(h.a)(xc),t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),c=e.reduce((function(e,t){return e+parseInt(t.inspect_qty)}),0);if(Nc(t),Mc(c),t>0){var i=Ye.filter((function(e){return e.size_start<=t&&e.size_end>=t}))[0]["25sample"];Dc(i)}else Dc(0)}),[xc,Ye]);var Vc=function(e,t){we.map((function(t){return t.SU===e?De(t.SU_NAME):null})),we.map((function(e){return e.MF===t?Ae(e.MF_NAME):null}))},Xc=function(e){var t,i=G.filter((function(t){return t.mc_no===e}));!function(e){Uc.current=!1;var t=Object(h.a)(c).concat(e);n(t);var i=xc.concat(e.map((function(e){return{mc_no:e.mc_no,po_no:e.po_no,order_qty:e.order_qty,item_no:e.item_no,ship_qty:e.ship_qty}}))),s=i.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=Ye.filter((function(e){return e.size_start<=s&&e.size_end>=s})),r=i.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{sample_qty:Math.round(e.ship_qty/s*a[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/s*a[0]["25sample"])})}));vc(r);var l=[];r.map((function(e){return e.po_no})).filter((function(e,t,c){return c.indexOf(e)===t})).forEach((function(e){var c=t.filter((function(t){return t.po_no===e}))[0].mc_no,i=t.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),n=r.filter((function(t){return t.po_no===e})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),s=t.filter((function(t){return t.po_no===e}))[0].customer;l.push({mc_no:c,po_no:e,order_qty:i,ship_qty:n,customer:s})})),Ac(l)}(i),t=void 0===ct.ship_window||0===ct.ship_window.length?i[0].ship_window:ct.ship_window.concat(", ").concat(i[0].ship_window);for(var s=i[0].item_desc,a=ct.fibre_content,r=0;r<i.length;r++)if(i[r].fabric_note.length>0){a=i[r].fabric_note;break}var l=i[0].label;it(Object(b.a)(Object(b.a)({},ct),{},{ship_window:t,product_type:s,fibre_content:a,label:l})),Vc(pe,xe),jt(!0),$e(!0),li(),te("")},Zc=function(e){Q(e),setTimeout((function(){Q({position:100})}),e.timeout)},$c=function(e){Object(v.trackPromise)(d()({url:"/api/search",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({_id:e})}).then((function(e){return e.data})).then((function(t){Uc.current=!1;var c=t.main.mf_no;if(0===t.items.length&&c===xe)console.log("Empty inspection record with mf# :",c);else{if(c!==xe)return void Zc({message:"This MC does not belong to this manufacturer!",position:0,timeout:1500,color:"alert__red"});0===G.filter((function(t){return t.mc_no===e.mc})).length&&(Uc.current=!0)}jt(!0),Ec.current=!0,n(t.items),vc(t.itemsTotal),Ac(t.poList),localStorage.setItem("appItems",JSON.stringify(t.items)),localStorage.setItem("appShip",JSON.stringify(t.itemsTotal)),te(t.main.inspection_date),rt(t.main),it(t.misc?t.misc:{}),void 0===t.misc.defectLanguage?Lt("en"):Lt(t.misc.defectLanguage),X(t.checkList),Vc(t.main.su_no,t.main.mf_no),void 0===t.defects?I([]):I(t.defects),void 0===t.uploads?oe(""):oe(t.uploads),void 0===t.update_history?_t([]):_t(t.update_history),kt(!1),It(!0),yt(!1);var i=new Array(t.itemsTotal.length).fill(!1);Yc(i)})).catch((function(e){406===e.response.status?Zc({message:"Not a valid MC for this manufacturer !",position:0,timeout:2e3,color:"alert__red"}):501===e.response.status?window.location="/login/timeout":Zc({message:"No such Inspection ID, please try again !",position:0,timeout:2e3,color:"alert__red"})})),"searchKey")},ei=function(){n([]),vc([]),Ac([]),I([]),X([]),Ne([]),oe([]),o(!1),it([]),rt([]),_t([]),jt(!1),$e(!1),yt(!1),kt([]),It(!1),yt(!0),Lc.current="",document.getElementById("itemTable_MC").value="",document.getElementById("itemTotal_searchString")&&(document.getElementById("itemTotal_searchString").value=""),zc([]),Yc([])},ti=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ci=function(){var e=Object(u.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zc({message:"Session timeout, please login again !",position:0,timeout:3e3,color:"alert__red"}),e.next=3,ti(3e3);case 3:window.location="/login/timeout";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ii=function(e){o(!0),Object(v.trackPromise)(d()({url:"/api/searchInspByMC",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({mc:e,mfList:ze})}).then((function(e){return e.data})).then((function(e){Ne(e),kt(!1)})).catch((function(e){501===e.response.status?ci():Zc({message:"Something went wrong !",position:0,timeout:2e3,color:"alert__red"})})),"mfrSelection")};function ni(e,t){for(var c=0;c<Gt.length;c+=1)if(Gt[c].product===e&&Gt[c].defect_detail_code===t)return!0;return!1}function si(){return"Failed"===ct.measurement_result||"Failed"===ct.packing_result||"Failed"===ht.visual_result?"Failed":(ht.visual_result,"Passed")}function ai(){return""!==ht.visual_result&&void 0!==ht.visual_result||(ht.visual_result="Passed"),ht}function ri(e){var t=new Date(e).toTimeString(),c=new Date(e).toDateString()+" "+t,i=c.search("GMT+")-1;return c=c.substring(0,i)}var li=function(){var e=Object(h.a)(Ft);e.sort((function(e,t){return e.id-t.id})),X(e)};return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsx)(w,{currentSU:pe,currentMF:xe,currentSUName:Te,currentMFName:Re,setSelectingSupplier:Be,setShowFull:jt,setMFRsearch:tc}),Object(m.jsx)(M,{partyTable:we,setCurrentSU:Oe,setCurrentMF:ve,setCurrentSUName:De,setCurrentMFName:Ae,selectingSupplier:Ue,setSelectingSupplier:Be,setMFRsearch:tc,mfrSearch:ec,getMCtable:function(e,t){Object(v.trackPromise)(d()({url:"/api/getMCtable",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({su:e,mf:t})}).then((function(e){return e.data})).then((function(e){J(e)})).catch((function(e){Zc({message:"Error getting MC",position:4,timeout:1500,color:"alert__red"})})),"getMCtable")},setEditMode:$e}),Object(m.jsx)(L,{position:1}),Object(m.jsx)(C,{handleSave:function(e,t){if(void 0===ct.qa_type||void 0===ct.sqa&&void 0===ct.mqa)return Zc({message:"QA Type and QA must be identified !",position:0,timeout:3e3,color:"alert__red"}),void $e(!0);var i={su_no:pe,mf_no:xe,inspection_date:ee,submitted:e},n={mc:ne.mc,iteration:ne.iteration,type:ne.type},s=Object(b.a)({},ct);s=Object(b.a)(Object(b.a)({},s),{},{final_result:si(),visual_result:ai(),defectLanguage:Et,submitted:e}),Object(v.trackPromise)(d()({url:"/api/save",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:n,main:i,misc:s,mf:xe,checkList:V,items:c,itemsTotal:xc,poList:Rc,defects:P,uploads:le,updateHistory:ft,folder:"SU"+pe+"MF"+xe,inspection_id:ne.mc+"-"+ne.iteration+"-"+ne.type})}).then((function(e){Zc({message:"Saved Successfully !",position:0,timeout:1e3,color:"alert__green"}),t?$e(!0):ei()})).catch((function(e){var t="There was an error saving this record, please contact the admin !!";e.message.includes("500")?t=e.response.data:Zc({message:t,position:0,timeout:4e3,color:"alert__red"}),Zc({message:t,position:0,timeout:4e3,color:"alert__red"})})),"saveInspection")},handleSearch:$c,inspectionID:ne,handleDelete:function(e){!0===window.confirm("Are you sure you want to delete this inspection ? ")&&Object(v.trackPromise)(d()({url:"/api/delete",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(ei(),Zc({message:"Deleted successfully !",position:0,timeout:1500,color:"alert__green"})):null})).catch((function(e){Zc({message:"Error deleting the inspection ID !",position:0,timeout:1500,color:"alert__red"})})),"deleteInspection")},printReport:function(e,t){void 0!==ct.qa_type?"MQA"!==ct.qa_type||void 0!==ct.mqa&&"Select"!==ct.mqa?(e="MMG Inspection Report - "+ne.mc+"-"+ne.iteration+"-"+ne.type+".xlsx",Object(v.trackPromise)(fetch("/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:ne}),localTime:JSON.stringify(ri(Date.now()))}}).then((function(e){return e.blob()})).then((function(t){var c=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=c,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"printReport")):Zc({message:"MQA must be specified !",position:0,timeout:2e3,color:"alert__red"}):Zc({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})},editMode:Ze,setEditMode:$e,userProfile:ue,main:at,misc:ct,showFull:dt,clearScreen:ei,updateHistory:ft,setDisplayAlert:Zc,oldMC:Uc}),Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsxs)(i.Fragment,{children:[Object(m.jsx)(N,{checkDuplicateID:function(e){Object(v.trackPromise)(d()({url:"/api/checkDuplicateID",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(t){return 200===t.status?void Zc({message:"This key has been used by previous inspection ! Please check and or consider a new iteration!",position:0,timeout:3e3,color:"alert__red"}):Xc(e.mc)})),"createInspection")},mcTable:G,setDisplayAlert:Zc,inspectionID:ne,setInspectionID:se,clearScreen:ei,searchInspByMC:ii,currentSU:pe,currentMF:xe,editMode:Ze,inspType:pc,showFull:dt}),l?Object(m.jsx)(k,{inspectionID:ne,setInspectionID:se,handleSearch:$c,searchInspByMC:ii,searchedMC:Se,setShowSearchedMC:o,currentMF:xe}):null]})})}),0===H.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:H})})}):null,Object(m.jsx)(L,{position:2}),Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(i.Fragment,{children:Object(m.jsx)(D,{setInspectionDate:te,inspectionDate:ee,setMisc:it,misc:ct,editMode:Ze,isCriticalDefect:ni,aqlTable:Ye,visualResult:ht,calculateFinalResult:si})})})}),Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(i.Fragment,{children:Object(m.jsx)(T,{setInspectionDate:te,inspectionDate:ee,setMisc:it,misc:ct,editMode:Ze,mqaMembers:lc,packTypes:nc,productCategories:uc,userProfile:ue,items:c})})})}),1===H.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:H})})}):null,Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(p,{setItems:n,items:c,mcTable:G,addMC:Xc,currentSU:pe,currentMF:xe,editMode:Ze,aqlTable:Ye,setDisplayAlert:Zc,ship:xc,setShip:vc,poList:Rc,setPOList:Ac,totalShip:Sc,setTotalShip:Nc,totalInspect:wc,setTotalInspect:Mc,totalSample:Tc,setTotalSample:Dc,reset:function(){vc((function(e){return e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{inspect_qty:e.sample_qty})}))}))},handleDeletePO:function(e,t){Wc("");var i=Object(h.a)(xc);i=i.filter((function(e){return e.po_no!==t}));var s=(i=xc.filter((function(e){return!(e.po_no===t)}))).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),a=Ye.filter((function(e){return e.size_start<=s&&e.size_end>=s}));i=i.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{sample_qty:Math.round(e.ship_qty/s*a[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/s*a[0]["25sample"])})})),vc(i),Ac((function(e){return e.filter((function(e){return e.po_no!==t}))}));var r=c.map((function(e){return e.mc_no})).filter((function(e,t,c){return c.indexOf(e)===t})),l=i.map((function(e){return e.mc_no})).filter((function(e,t,c){return c.indexOf(e)===t}));r.length>l.length&&n((function(t){return t.filter((function(t){return t.mc_no!==e}))}))},handleHighlight:Wc,checkedState:Jc,setCheckedState:Yc,deleteShipMulti:function(e){Wc("");var t=e.reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),i=Ye.filter((function(e){return e.size_start<=t&&e.size_end>=t}));e=e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{sample_qty:Math.round(e.ship_qty/t*i[0]["25sample"]),inspect_qty:Math.round(e.ship_qty/t*i[0]["25sample"])})})),vc(e);var s=Object(h.a)(c),a=[];e.map((function(e){return e.po_no})).filter((function(e,t,c){return c.indexOf(e)===t})).forEach((function(t){var c=s.filter((function(e){return e.po_no===t}))[0].mc_no,i=s.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.order_qty)}),0),n=e.filter((function(e){return e.po_no===t})).reduce((function(e,t){return e+parseInt(t.ship_qty)}),0),r=s.filter((function(e){return e.po_no===t}))[0].customer;a.push({mc_no:c,po_no:t,order_qty:i,ship_qty:n,customer:r})})),Ac(a);var r=e.map((function(e){return e.mc_no})).filter((function(e,t,c){return c.indexOf(e)===t}));n(s.filter((function(e){return r.includes(e.mc_no)})))}})})}),5===H.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:H})})}):null,Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large "+(dt?null:"hideSection"),children:Object(m.jsx)(O,{items:c,addToDefectList:function(e,t,c,i,n,s,a,r){I((function(l){return l.concat({id:Object(E.a)(),product:e,defect_area:t,defect_detail:c,major:i,minor:n,defect_area_code:s,defect_detail_area:a,defect_language:r,critical:ni(e,a)})}))},setDisplayAlert:Zc,editMode:Ze,defects:P,defectLanguage:Et,setDefectLanguage:Lt,defectList:Ht,showFull:dt})})}),2===H.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:H})})}):null,Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large "+(dt?null:"hideSection"),children:Object(m.jsx)(f,{defects:P,deleteDefect:function(e){I(P.filter((function(t){return t.id!==e})))},editMode:Ze,isCriticalDefect:ni,defectLanguage:Et,defectList:Ht})})}),Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large "+(dt?null:"hideSection"),children:Object(m.jsx)(x,{checkList:V,handleCheckItemChange:function(e,t){var c=Object(h.a)(V),i=c.findIndex((function(t){return t.id===e}));c[i]=t,X(c)},editMode:Ze})})}),3===H.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:H})})}):null,Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsxs)("div",{className:"flex-large ",children:[Object(m.jsx)(q,{currentSU:pe,currentMF:xe,inspectionID:ne,editMode:Ze,getSharePointFiles:function(){zc([]),Object(v.trackPromise)(d()({url:"/api/getsharepointfiles",method:"POST",headers:{"Content-type":"application/json",api:"yes"},data:JSON.stringify({folder:"SU"+pe+"MF"+xe,inspection_id:ne.mc+"-"+ne.iteration+"-"+ne.type})}).then((function(e){return e.data})).then((function(e){kt(e)})).catch((function(e){404===e.response.status&&Zc({message:"Folder on SharePoint was not created !",position:3,timeout:2e3,color:"alert__red"})})),"sharePointFiles")},setShowSharePointFiles:It,showSharePointFiles:Pt,setSharePointFiles:kt,sharePointPath:Vt,createsharePointPDF:function(){if(!0===window.confirm("You're recommended to use Microsoft Lens to create PDF file.  For non-chart photos with lesser resolution (around 400px *400px), you can try this function but all photo files will be zipped !  Please use with care !")){var e=ee.getMonth()+1+"/"+ee.getDate()+"/"+ee.getFullYear();Object(v.trackPromise)(d()({url:"/api/createsharepointpdf",timeout:28e3,method:"POST",headers:{"Content-type":"application/json",api:"yes",inspection_id:ne.mc+"-"+ne.iteration+"-"+ne.type,relative_url:Vt.concat("/","SU",pe,"MF",xe),inspection_date:e},data:JSON.stringify({folder:"SU"+pe+"MF"+xe,inspection_id:ne.mc+"-"+ne.iteration+"-"+ne.type})}).then((function(e){return e.data})).then((function(e){kt(e),document.getElementById("sharePoint_refresh").click()})).catch((function(e){e.message.includes("timeout")&&Zc({message:"Warning : Server timeout interruption and some files may be lost ! Please refresh SharePoint status to make sure all photos are there and reduce the size of your photos and resubmit as neccessary, or use Microsft Lens on your mobile device!",position:3,timeout:9e3,color:"alert__red"}),404===e.response.status?Zc({message:"PDF creation error !",position:3,timeout:2e3,color:"alert__red"}):405===e.response.status&&Zc({message:"No photos to generate PDF !",position:3,timeout:2e3,color:"alert__red"})})),"sharePointFiles")}}}),Object(m.jsx)(L,{position:3})]})}),4===H.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:H})})}):null,Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large ",children:Object(m.jsx)(R,{sharePointFiles:Ct,downloadSharePointFile:function(e){var t="/sites/OSO/".concat(Vt,"/","SU",pe,"MF",xe,"/",e);Object(v.trackPromise)(fetch("/downloadSharePointFile",{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",file_url:encodeURIComponent(t)}}).then((function(e){return e.blob()})).then((function(t){var c=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=c,i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)})),"downloadSharePointfiles")},showSharePointFiles:Pt,convertToLocal:ri,editMode:Ze,handleDeleteSPfile:function(e){!0===window.confirm("Are you sure you want to delete the SharePoint file ? ")&&Object(v.trackPromise)(d()({url:"/api/deleteSPfile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify({_id:e})}).then((function(e){return 200===e.status?(Zc({message:"SharePoint file deleted successfully !",position:3,timeout:3e3,color:"alert__green"}),document.getElementById("sharePoint_refresh").click()):null})).catch((function(e){Zc({message:"Error deleting the SP file !",position:4,timeout:1500,color:"alert__red"})})),"deleteInspection")}})})}),Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large ",children:Object(m.jsx)(g,{setDisplayAlert:Zc,inspectionID:ne,setUploads:oe,uploads:le,downloadDoc:function(e,t){return function(c){fetch("/download/"+e,{method:"GET",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment"}}).then((function(e){return e.blob()})).then((function(e){var c=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.href=c,i.setAttribute("download",t),document.body.appendChild(i),i.click(),i.parentNode.removeChild(i)}))}},currentSU:pe,currentMF:xe,setShowSharePointFiles:It,sharePointPath:Vt,inspectionDate:ee,setUploadResult:zc})})}),Object(m.jsx)("div",{className:"flex-row "+(dt&&!Pt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large ",children:Object(m.jsx)(A,{uploadResult:Qc,setUploadResult:zc})})}),Object(m.jsx)("div",{className:"flex-row "+(dt?null:"hideSection"),children:Object(m.jsx)("div",{className:"flex-large ",children:Object(m.jsx)(F,{updateHistory:ft,showHistory:gt,setShowHistory:yt,convertToLocal:ri})})}),Object(m.jsx)("div",{children:"\xa0"}),Object(m.jsx)("div",{children:"\xa0"})]})},B=function(e){var t=e.env;return Object(m.jsx)("div",{className:"welcome",children:Object(m.jsx)("div",{children:"DEV"===t?Object(m.jsx)("iframe",{src:"http://localhost:5000/map-marker",title:"map",style:{width:"100%",height:"103%",border:0}}):Object(m.jsx)("iframe",{src:"https://mmgapp3.herokuapp.com/map-marker",title:"map",style:{width:"100%",height:"103%",border:0}})})})},H=function(e){var t=Object(i.useState)([]),c=Object(a.a)(t,2),n=c[0],s=c[1],r=Object(i.useState)(""),l=Object(a.a)(r,2),o=l[0],j=l[1],u=Object(i.useState)({position:100}),b=Object(a.a)(u,2),h=b[0],p=b[1],O=Object(i.useState)(!1),f=Object(a.a)(O,2),x=f[0],g=f[1],y=Object(i.useState)(!1),S=Object(a.a)(y,2),N=S[0],C=S[1];function k(e){var t=new Date(e).toTimeString(),c=new Date(e).toDateString()+" "+t,i=c.search("GMT+")-1;return c=c.substring(0,i)}Object(i.useEffect)((function(){return Object(v.trackPromise)(d()({url:"/api/pastXdaysResult",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){var t=function(e){return e.sort((function(e,t){return e.main.inspection_date>t.main.inspection_date?-1:1})),e}(e.pastInspections);s(t),j(e.user)})).catch((function(e){console.log(e)})),"pastInspection"),function(){s({}),j("")}}),[]);var w=function(e){p(e),setTimeout((function(){p({position:0})}),e.timeout)},M=function(e,t){return function(t){var c=t.target.value;switch(e){case 1:g("Yes"===c);break;case 2:C("Yes"===c)}}};return Object(m.jsxs)(i.Fragment,{children:[Object(m.jsxs)("div",{className:"xDaysResult",children:[Object(m.jsxs)("div",{className:"xDaysResult_gridSelection",children:[Object(m.jsxs)("div",{className:"xDaysResult_gridSelection_radio",children:[Object(m.jsxs)("div",{children:["All Status \xa0\xa0",Object(m.jsx)("input",{type:"radio",id:"xDaysResult_draft",name:"xDaysResult_draft",value:"No",onChange:M(1)})]}),Object(m.jsxs)("div",{children:["Draft Only \xa0\xa0",Object(m.jsx)("input",{type:"radio",id:"xDaysResult_draft",name:"xDaysResult_draft",value:"Yes",onChange:M(1)})]})]}),Object(m.jsxs)("div",{className:"xDaysResult_gridSelection_radio",children:[Object(m.jsxs)("div",{children:["My Factories \xa0\xa0",Object(m.jsx)("input",{type:"radio",id:"xDaysResult_my_inspections",name:"xDaysResult_my_inspections",value:"No",onChange:M(2)})]}),Object(m.jsxs)("div",{children:["My Inspections Only \xa0\xa0",Object(m.jsx)("input",{type:"radio",id:"xDaysResult_my_inspections",name:"xDaysResult_my_inspections",value:"Yes",onChange:M(2)})]})]})]}),n.length>0?Object(m.jsxs)("div",{className:"xDaysResult_gridHeader",children:[Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Inspection Date"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Supplier"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Manufacturer"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Inspection ID"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Result"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Status"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"QA"}),Object(m.jsx)("div",{className:"xDaysResult_gridHeaderItem",children:"Download"})]}):null,0===h.position?Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsx)("div",{className:"flex-large",children:Object(m.jsx)(_,{alert:h})})}):null,n.length>0?n.filter((function(e){return!1===e.main.submitted||!1===x})).filter((function(e){return!1===N||"MQA"===e.misc.qa_type&&e.misc.mqa===o||"SQA"===e.misc.qa_type&&e.misc.sqa===o})).map((function(e,t){return Object(m.jsxs)("div",{className:"xDaysResult_gridDetail",children:[Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:(c=e.main.inspection_date,new Date(c).toDateString())}),Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.su_no}),Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.mf_no}),Object(m.jsxs)("div",{className:"xDaysResult_gridItem",children:[e._id.mc+"-"+e._id.iteration+"-"+e._id.type," "]}),Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:e.misc.final_result}),Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:e.main.submitted?"Released":"Draft"}),Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:"MQA"===e.misc.qa_type?e.misc.mqa:e.misc.sqa}),Object(m.jsx)("div",{className:"xDaysResult_gridItem",children:Object(m.jsx)("i",{className:"clickable fa fa-download",onClick:function(){!function(e,t,c,i){if(void 0!==c)if("MQA"!==c||void 0!==i&&"Select"!==i){var n="MMG Inspection Report - "+e.mc+"-"+e.iteration+"-"+e.type+(t?"":" (Draft) ")+".xlsx";Object(v.trackPromise)(fetch("/printreport",{method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Disposition":"attachment","Cache-Control":"no-cache",inspectionID:JSON.stringify({inspectionID:e}),localTime:JSON.stringify(k(Date.now()))}}).then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(new Blob([e])),c=document.createElement("a");c.href=t,c.setAttribute("download",n),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)})),"printReport")}else w({message:"MQA must be specified !",position:0,timeout:2e3,color:"alert__red"});else w({message:"QA Type must be chosen !",position:0,timeout:2e3,color:"alert__red"})}({mc:e._id.mc,iteration:e._id.iteration,type:e._id.type},e.misc.submitted,e.misc.qa_type,e.misc.mqa)}})})]},t);var c})):null]}),Object(m.jsx)(L,{position:10})]})},Q=function(e){var t=e.userProfile;return Object(m.jsx)(i.Fragment,{children:Object(m.jsxs)("div",{className:"userProfile ".concat("dev"===t.databaseSchema?"userProfile_dev_color":"userProfile_prod_color"),children:[Object(m.jsxs)("div",{className:"userProfile_title",children:[Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:"static/img/macys-header.jpg","aria-hidden":!0,alt:"",width:"30",height:"30"})}),Object(m.jsx)("div",{children:"MMG Inspection App"})]}),Object(m.jsxs)("div",{className:"userProfile_personal",children:[Object(m.jsxs)("div",{className:"userProfile_name",children:[t.first_name?"Hi, "+t.first_name:null," "]}),Object(m.jsx)("div",{className:"userProfile_photo",children:t.email?t.email.includes("@macys.com")?Object(m.jsx)("img",{src:"/api/getPhoto","aria-hidden":!0,alt:"Searching for photo...",width:"60",height:"60"}):Object(m.jsx)("img",{src:"static/img/anonymous.jpg","aria-hidden":!0,alt:"No factory photo !!",width:"60",height:"60"}):Object(m.jsx)("div",{children:"Searching for photo..."})})]})]})})},z=function(){var e=Object(i.useState)({}),t=Object(a.a)(e,2),c=t[0],n=t[1];return Object(i.useEffect)((function(){Object(v.trackPromise)(d()({url:"/api/getUserProfile",method:"POST",headers:{"Content-type":"application/json",api:"yes"}}).then((function(e){return e.data})).then((function(e){n(e.userProfile)})).catch((function(e){console.log(e)})))}),[]),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"flex-row",children:Object(m.jsxs)("div",{className:"flex-large",children:[Object(m.jsx)(Q,{userProfile:c}),Object(m.jsxs)(r.a,{children:[Object(m.jsx)("nav",{children:Object(m.jsxs)("ul",{className:"app_header",children:[Object(m.jsx)("li",{children:Object(m.jsx)(r.b,{to:"/",className:"link",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(r.b,{to:"/appInspection",className:"link",children:"Inspection"})}),Object(m.jsx)("li",{children:Object(m.jsx)(r.b,{to:"/xDaysResult",className:"link",children:"Past Inspection Results"})}),void 0!==c.email&&c.email.includes("macys.com")?Object(m.jsx)("li",{className:"link",onClick:function(){!function(){var e=window.open("https://app.powerbi.com/reportEmbed?reportId=a1e9a85b-a97c-42d0-9305-f283e64cd79a&autoAuth=true&filterPanelEnabled=False&pageName=ReportSectionf1be12cf083e1c0eba15","_blank","noopener,noreferrer");e&&(e.opener=null)}()},children:"Power BI"}):null,Object(m.jsx)("button",{className:"fa fa-sign-out",onClick:function(){localStorage.clear(),window.location="/logout"},children:"Logout"})]})}),Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/",element:Object(m.jsx)(B,{env:c.environment})}),Object(m.jsx)(l.a,{path:"/appInspection",element:Object(m.jsx)(U,{})}),Object(m.jsx)(l.a,{path:"/xDaysResult",element:Object(m.jsx)(H,{})})]})]})]})})})};s.a.render(Object(m.jsx)(z,{}),document.getElementById("root"))},45:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){}},[[161,1,2]]]);
//# sourceMappingURL=main.2c034e99.chunk.js.map